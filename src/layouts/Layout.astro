---
import "@/styles/global.css";
import BaseLink from "@/components/BaseLink.astro";

const { title } = Astro.props;

// Get build info from environment variables set by GitHub Actions
const hash = import.meta.env.COMMIT_HASH;
const buildDate = import.meta.env.BUILD_DATE || new Date().toISOString();

const displayHash = hash?.slice(0, 7) || "dev";

const repoUrl = "https://github.com/ap-1/anish.land";
const commitUrl = hash ? `${repoUrl}/commit/${hash}` : "#";
---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/png" href="/favicon.png" />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />

        <title>{title}</title>
    </head>
    <body class="font-serif w-screen h-screen overflow-hidden relative">
        <main class="flex justify-center items-center h-full w-full">
            <slot />
        </main>

        <footer
            class="absolute bottom-4 left-4 text-xs text-gray-500 font-mono"
        >
            commit <BaseLink href={commitUrl}>{displayHash}</BaseLink> at {
                buildDate
            } with <BaseLink href="https://astro.build"
                >{Astro.generator}</BaseLink
            >
        </footer>
    </body>
</html>
