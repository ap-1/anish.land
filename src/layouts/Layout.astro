---
import "@/styles/global.css";
import Link from "@/components/Link.astro";

const { title } = Astro.props;

// Get build info from environment variables set by GitHub Actions
const hash = import.meta.env.COMMIT_HASH;
const buildDate = import.meta.env.BUILD_DATE || new Date().toISOString();

const displayHash = hash?.slice(0, 7) || "dev";

const repoUrl = "https://github.com/ap-1/anish.land";
const commitUrl = hash ? `${repoUrl}/commit/${hash}` : "#";
---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/png" href="/favicon.png" />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />

        <title>{title}</title>
    </head>
    <body class="font-serif w-screen h-screen overflow-hidden relative">
        <slot />

        <footer
            class="absolute bottom-4 left-4 text-xs text-neutral-500 font-mono"
        >
            commit <Link href={commitUrl} target="_blank">{displayHash}</Link> at
            {buildDate} with <Link href="https://astro.build" target="_blank"
                >{Astro.generator}</Link
            > / copyright Â© 2025 <Link
                href="https://github.com/ap-1"
                target="_blank">ap-1</Link
            >
        </footer>
    </body>
</html>

<script is:inline>
    document.addEventListener("keydown", (event) => {
        if (event.key === "a") {
            window.location.href = "/about";
        } else if (event.key === "c") {
            window.location.href = "/contact";
        } else if (event.key === "p") {
            window.location.href = "/projects";
        }
    });
</script>
